<!DOCTYPE html>
<html>
<head>
  <title>Admin Panel - Pengguna Online</title>
</head>
<body>
  <h1>Daftar Pengguna Online:</h1>
  <ul id="userList"></ul>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js";
    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAs7bvH4MMcIimDVY5cNuSwoaeNTgWahx4",
      authDomain: "exambro-4b098.firebaseapp.com",
      projectId: "exambro-4b098",
      storageBucket: "exambro-4b098.firebasestorage.app",
      messagingSenderId: "626797016044",
      appId: "1:626797016044:web:2dd7f66db290464e6f86c9",
      databaseURL: "https://exambro-4b098-default-rtdb.firebaseio.com"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const userList = document.getElementById("userList");

    const usersRef = ref(db, "users");

    onValue(usersRef, (snapshot) => {
      userList.innerHTML = "";
      snapshot.forEach(child => {
        const user = child.val();
        if (user.status === "online") {
          const li = document.createElement("li");
          li.textContent = `${child.key} - Aktif: ${user.lastSeen}`;
          userList.appendChild(li);
        }
      });
    });
  </script>
</body>
</html>